{"/home/ingrid/Programming/trybe/projetos/back-end/bloco30/sd-014-a-project-car-shop/src/controllers/GenericController.ts":{"path":"/home/ingrid/Programming/trybe/projetos/back-end/bloco30/sd-014-a-project-car-shop/src/controllers/GenericController.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":4,"column":0},"end":{"line":9,"column":48}},"2":{"start":{"line":5,"column":4},"end":{"line":5,"column":59}},"3":{"start":{"line":6,"column":4},"end":{"line":6,"column":54}},"4":{"start":{"line":7,"column":4},"end":{"line":7,"column":54}},"5":{"start":{"line":8,"column":4},"end":{"line":8,"column":51}},"6":{"start":{"line":12,"column":8},"end":{"line":12,"column":31}},"7":{"start":{"line":13,"column":8},"end":{"line":13,"column":27}},"8":{"start":{"line":15,"column":8},"end":{"line":15,"column":39}},"9":{"start":{"line":20,"column":8},"end":{"line":36,"column":10}},"10":{"start":{"line":21,"column":12},"end":{"line":35,"column":13}},"11":{"start":{"line":22,"column":33},"end":{"line":22,"column":36}},"12":{"start":{"line":23,"column":29},"end":{"line":23,"column":60}},"13":{"start":{"line":24,"column":16},"end":{"line":26,"column":17}},"14":{"start":{"line":25,"column":20},"end":{"line":25,"column":81}},"15":{"start":{"line":27,"column":16},"end":{"line":30,"column":17}},"16":{"start":{"line":28,"column":20},"end":{"line":29,"column":71}},"17":{"start":{"line":31,"column":16},"end":{"line":31,"column":50}},"18":{"start":{"line":34,"column":16},"end":{"line":34,"column":77}},"19":{"start":{"line":37,"column":8},"end":{"line":46,"column":10}},"20":{"start":{"line":38,"column":12},"end":{"line":45,"column":13}},"21":{"start":{"line":40,"column":29},"end":{"line":40,"column":54}},"22":{"start":{"line":41,"column":16},"end":{"line":41,"column":50}},"23":{"start":{"line":44,"column":16},"end":{"line":44,"column":77}},"24":{"start":{"line":51,"column":8},"end":{"line":66,"column":10}},"25":{"start":{"line":52,"column":27},"end":{"line":52,"column":37}},"26":{"start":{"line":53,"column":12},"end":{"line":56,"column":13}},"27":{"start":{"line":54,"column":16},"end":{"line":55,"column":79}},"28":{"start":{"line":57,"column":12},"end":{"line":65,"column":13}},"29":{"start":{"line":58,"column":28},"end":{"line":58,"column":58}},"30":{"start":{"line":59,"column":16},"end":{"line":61,"column":76}},"31":{"start":{"line":64,"column":16},"end":{"line":64,"column":77}},"32":{"start":{"line":71,"column":8},"end":{"line":85,"column":10}},"33":{"start":{"line":72,"column":12},"end":{"line":84,"column":13}},"34":{"start":{"line":73,"column":28},"end":{"line":73,"column":78}},"35":{"start":{"line":74,"column":16},"end":{"line":76,"column":17}},"36":{"start":{"line":75,"column":20},"end":{"line":75,"column":81}},"37":{"start":{"line":77,"column":16},"end":{"line":79,"column":17}},"38":{"start":{"line":78,"column":20},"end":{"line":78,"column":88}},"39":{"start":{"line":80,"column":16},"end":{"line":80,"column":49}},"40":{"start":{"line":83,"column":16},"end":{"line":83,"column":77}},"41":{"start":{"line":86,"column":8},"end":{"line":101,"column":10}},"42":{"start":{"line":87,"column":27},"end":{"line":87,"column":37}},"43":{"start":{"line":88,"column":12},"end":{"line":91,"column":13}},"44":{"start":{"line":89,"column":16},"end":{"line":90,"column":79}},"45":{"start":{"line":92,"column":12},"end":{"line":100,"column":13}},"46":{"start":{"line":93,"column":28},"end":{"line":93,"column":57}},"47":{"start":{"line":94,"column":16},"end":{"line":96,"column":76}},"48":{"start":{"line":99,"column":16},"end":{"line":99,"column":77}},"49":{"start":{"line":103,"column":21},"end":{"line":103,"column":39}},"50":{"start":{"line":105,"column":0},"end":{"line":105,"column":36}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":1},"end":{"line":4,"column":2}},"loc":{"start":{"line":4,"column":29},"end":{"line":9,"column":1}},"line":4},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":4},"end":{"line":11,"column":5}},"loc":{"start":{"line":11,"column":32},"end":{"line":102,"column":5}},"line":11},"2":{"name":"(anonymous_2)","decl":{"start":{"line":20,"column":22},"end":{"line":20,"column":23}},"loc":{"start":{"line":20,"column":42},"end":{"line":36,"column":9}},"line":20},"3":{"name":"(anonymous_3)","decl":{"start":{"line":37,"column":20},"end":{"line":37,"column":21}},"loc":{"start":{"line":37,"column":41},"end":{"line":46,"column":9}},"line":37},"4":{"name":"(anonymous_4)","decl":{"start":{"line":51,"column":23},"end":{"line":51,"column":24}},"loc":{"start":{"line":51,"column":43},"end":{"line":66,"column":9}},"line":51},"5":{"name":"(anonymous_5)","decl":{"start":{"line":71,"column":22},"end":{"line":71,"column":23}},"loc":{"start":{"line":71,"column":42},"end":{"line":85,"column":9}},"line":71},"6":{"name":"(anonymous_6)","decl":{"start":{"line":86,"column":22},"end":{"line":86,"column":23}},"loc":{"start":{"line":86,"column":42},"end":{"line":101,"column":9}},"line":86},"7":{"name":"(anonymous_7)","decl":{"start":{"line":103,"column":4},"end":{"line":103,"column":5}},"loc":{"start":{"line":103,"column":19},"end":{"line":103,"column":41}},"line":103}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":3},"end":{"line":9,"column":46}},"type":"binary-expr","locations":[{"start":{"line":9,"column":3},"end":{"line":9,"column":19}},{"start":{"line":9,"column":24},"end":{"line":9,"column":45}}],"line":9},"1":{"loc":{"start":{"line":24,"column":16},"end":{"line":26,"column":17}},"type":"if","locations":[{"start":{"line":24,"column":16},"end":{"line":26,"column":17}},{"start":{"line":24,"column":16},"end":{"line":26,"column":17}}],"line":24},"2":{"loc":{"start":{"line":27,"column":16},"end":{"line":30,"column":17}},"type":"if","locations":[{"start":{"line":27,"column":16},"end":{"line":30,"column":17}},{"start":{"line":27,"column":16},"end":{"line":30,"column":17}}],"line":27},"3":{"loc":{"start":{"line":53,"column":12},"end":{"line":56,"column":13}},"type":"if","locations":[{"start":{"line":53,"column":12},"end":{"line":56,"column":13}},{"start":{"line":53,"column":12},"end":{"line":56,"column":13}}],"line":53},"4":{"loc":{"start":{"line":59,"column":23},"end":{"line":61,"column":75}},"type":"cond-expr","locations":[{"start":{"line":60,"column":22},"end":{"line":60,"column":35}},{"start":{"line":61,"column":22},"end":{"line":61,"column":75}}],"line":59},"5":{"loc":{"start":{"line":74,"column":16},"end":{"line":76,"column":17}},"type":"if","locations":[{"start":{"line":74,"column":16},"end":{"line":76,"column":17}},{"start":{"line":74,"column":16},"end":{"line":76,"column":17}}],"line":74},"6":{"loc":{"start":{"line":77,"column":16},"end":{"line":79,"column":17}},"type":"if","locations":[{"start":{"line":77,"column":16},"end":{"line":79,"column":17}},{"start":{"line":77,"column":16},"end":{"line":79,"column":17}}],"line":77},"7":{"loc":{"start":{"line":88,"column":12},"end":{"line":91,"column":13}},"type":"if","locations":[{"start":{"line":88,"column":12},"end":{"line":91,"column":13}},{"start":{"line":88,"column":12},"end":{"line":91,"column":13}}],"line":88},"8":{"loc":{"start":{"line":94,"column":23},"end":{"line":96,"column":75}},"type":"cond-expr","locations":[{"start":{"line":95,"column":22},"end":{"line":95,"column":47}},{"start":{"line":96,"column":22},"end":{"line":96,"column":75}}],"line":94}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":2,"11":2,"12":2,"13":2,"14":0,"15":2,"16":0,"17":2,"18":0,"19":1,"20":2,"21":2,"22":2,"23":0,"24":1,"25":2,"26":2,"27":0,"28":2,"29":2,"30":2,"31":0,"32":1,"33":2,"34":2,"35":2,"36":1,"37":1,"38":0,"39":1,"40":0,"41":1,"42":2,"43":2,"44":0,"45":2,"46":2,"47":2,"48":0,"49":0,"50":1},"f":{"0":1,"1":1,"2":2,"3":2,"4":2,"5":2,"6":2,"7":0},"b":{"0":[1,1],"1":[0,2],"2":[0,2],"3":[0,2],"4":[1,1],"5":[1,1],"6":[0,1],"7":[0,2],"8":[1,1]},"inputSourceMap":{"version":3,"file":"/home/ingrid/Programming/trybe/projetos/back-end/bloco30/sd-014-a-project-car-shop/src/controllers/GenericController.ts","sources":["/home/ingrid/Programming/trybe/projetos/back-end/bloco30/sd-014-a-project-car-shop/src/controllers/GenericController.ts"],"names":[],"mappings":"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","sourcesContent":["import { Request, Response } from 'express';\nimport GenericService from '../services/GenericServices';\n// import ControllerErrors from '../enum';\n\nexport type ResponseError = {\n  error: unknown;\n};\n\nexport interface RequestWithBody<T> extends Request {\n  body: T;\n}\n\nenum ControllerErrors {\n  internal = 'Internal Server Error',\n  notFound = 'Object not found',\n  requiredId = 'Id is required',\n  badRequest = 'Bad request',\n}\n\nclass GenericController<T> {\n  // route: string;\n\n  protected errors = ControllerErrors;\n  \n  constructor(\n    public service: GenericService<T>,\n    public route: string, \n  ) {}\n\n  get getRoute() { return this.route; }\n\n  // abstract create(\n  //   req: RequestWithBody<T>,\n  //   res: Response<T | ResponseError >,\n  // ): Promise<typeof res>;\n\n  create = async (\n    req: RequestWithBody<T>,\n    res: Response<T | ResponseError>,\n  ): Promise<typeof res> => {\n    try {\n      const { body } = req;\n      const objs = await this.service.create(body);\n      if (!objs) {\n        return res.status(500).json({ error: this.errors.internal });\n      }\n      if ('error' in objs) {\n        return res.status(400)\n          .json({ error: objs.error.issues[0].message });\n      }\n      return res.status(201).json(objs);\n    } catch (err) {\n      return res.status(500).json({ error: this.errors.internal });\n    }\n  };\n\n  read = async (\n    _req: Request,\n    res: Response<T[] | ResponseError>,\n  ): Promise<typeof res> => {\n    try {\n      // console.log('obj');\n\n      const objs = await this.service.read();\n      \n      return res.status(200).json(objs);\n    } catch (err) {\n      return res.status(500).json({ error: this.errors.internal });\n    }\n  };\n\n  // abstract readOne(\n  //   req: Request<{ id: string; }>,\n  //   res: Response<T | ResponseError>\n  // ): Promise<typeof res>;\n\n  readOne = async (\n    req: Request,\n    res: Response<T | ResponseError>,\n  ): Promise<typeof res> => {\n    const { id } = req.params;\n    if (id.length < 24) {\n      return res.status(400)\n        .json({ error: 'Id must have 24 hexadecimal characters' });\n    } \n    try {\n      const obj = await this.service.readOne(id);\n      return obj \n        ? res.json(obj)\n        : res.status(404).json({ error: this.errors.notFound });\n    } catch (error) {\n      return res.status(500).json({ error: this.errors.internal });\n    }\n  };\n\n  // abstract update(\n  //   req: RequestWithBody<T>,\n  //   res: Response<T | ResponseError>,\n  // ): Promise<typeof res>;\n\n  public update = async (\n    req: Request,\n    res: Response<T | ResponseError>,\n  ): Promise<typeof res> => {\n    try {\n      const obj = await this.service.update(req.params.id, req.body);\n\n      if (!obj) {\n        return res.status(404).json({ error: this.errors.notFound });\n      }\n      \n      if ('error' in obj) {\n        return res.status(400).json({ error: obj.error.issues[0].message });\n      }\n  \n      return res.status(200).json(obj);\n    } catch (error) {\n      return res.status(500).json({ error: this.errors.internal });\n    }\n  };\n\n  delete = async (\n    req: Request,\n    res: Response<T | ResponseError>,\n  ): Promise<typeof res> => {\n    const { id } = req.params;\n    if (id.length < 24) {\n      return res.status(400)\n        .json({ error: 'Id must have 24 hexadecimal characters' });\n    } \n    try {\n      const obj = await this.service.delete(id);\n      return obj \n        ? res.status(204).json(obj)\n        : res.status(404).json({ error: this.errors.notFound });\n    } catch (error) {\n      return res.status(500).json({ error: this.errors.internal });\n    }\n  };\n}\nexport default GenericController;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"2350f793eca1165147a0dfa828bcc8ebd69b1c3c"},"/home/ingrid/Programming/trybe/projetos/back-end/bloco30/sd-014-a-project-car-shop/src/models/GenericModel.ts":{"path":"/home/ingrid/Programming/trybe/projetos/back-end/bloco30/sd-014-a-project-car-shop/src/models/GenericModel.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":6,"column":8},"end":{"line":6,"column":27}},"2":{"start":{"line":7,"column":8},"end":{"line":7,"column":67}},"3":{"start":{"line":7,"column":37},"end":{"line":7,"column":66}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":50}},"5":{"start":{"line":8,"column":32},"end":{"line":8,"column":49}},"6":{"start":{"line":9,"column":8},"end":{"line":9,"column":70}},"7":{"start":{"line":9,"column":37},"end":{"line":9,"column":69}},"8":{"start":{"line":10,"column":8},"end":{"line":10,"column":103}},"9":{"start":{"line":10,"column":41},"end":{"line":10,"column":102}},"10":{"start":{"line":11,"column":8},"end":{"line":11,"column":78}},"11":{"start":{"line":11,"column":36},"end":{"line":11,"column":77}},"12":{"start":{"line":14,"column":0},"end":{"line":14,"column":31}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":4},"end":{"line":5,"column":5}},"loc":{"start":{"line":5,"column":23},"end":{"line":12,"column":5}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":7,"column":22},"end":{"line":7,"column":23}},"loc":{"start":{"line":7,"column":37},"end":{"line":7,"column":66}},"line":7},"2":{"name":"(anonymous_2)","decl":{"start":{"line":8,"column":20},"end":{"line":8,"column":21}},"loc":{"start":{"line":8,"column":32},"end":{"line":8,"column":49}},"line":8},"3":{"name":"(anonymous_3)","decl":{"start":{"line":9,"column":23},"end":{"line":9,"column":24}},"loc":{"start":{"line":9,"column":37},"end":{"line":9,"column":69}},"line":9},"4":{"name":"(anonymous_4)","decl":{"start":{"line":10,"column":22},"end":{"line":10,"column":23}},"loc":{"start":{"line":10,"column":41},"end":{"line":10,"column":102}},"line":10},"5":{"name":"(anonymous_5)","decl":{"start":{"line":11,"column":22},"end":{"line":11,"column":23}},"loc":{"start":{"line":11,"column":36},"end":{"line":11,"column":77}},"line":11}},"branchMap":{},"s":{"0":1,"1":3,"2":3,"3":1,"4":3,"5":2,"6":3,"7":2,"8":3,"9":2,"10":3,"11":2,"12":1},"f":{"0":3,"1":1,"2":2,"3":2,"4":2,"5":2},"b":{},"inputSourceMap":{"version":3,"file":"/home/ingrid/Programming/trybe/projetos/back-end/bloco30/sd-014-a-project-car-shop/src/models/GenericModel.ts","sources":["/home/ingrid/Programming/trybe/projetos/back-end/bloco30/sd-014-a-project-car-shop/src/models/GenericModel.ts"],"names":[],"mappings":";;AAGA,uDAAuD;AACvD,MAAM,YAAY;IAChB,YAAmB,KAAsB;QAAtB,UAAK,GAAL,KAAK,CAAiB;QAElC,WAAM,GAAG,KAAK,EAAE,GAAM,EAAc,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,GAAG,GAAG,EAAE,CAAC,CAAC;QAErE,SAAI,GAAG,KAAK,IAAkB,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;QAEnD,YAAO,GAAG,KAAK,EAAE,EAAU,EAAqB,EAAE,CACvD,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE,CAAC,CAAC;QAE5B,WAAM,GAAG,KAAK,EAAE,EAAU,EAAE,GAAW,EAAqB,EAAE,CACnE,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC;QAEzD,WAAM,GAAG,KAAK,EAAE,EAAU,EAAqB,EAAE,CACtD,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE,CAAC,CAAC;IAbA,CAAC;CAc9C;AAED,kBAAe,YAAY,CAAC","sourcesContent":["import { Model as M, Document } from 'mongoose';\nimport { Model } from '../interfaces/ModelInterface'; \n\n// abstract class GenericModel<T> implements Model<T> {\nclass GenericModel<T> implements Model<T> {\n  constructor(public model: M<T & Document>) {}\n\n  public create = async (obj: T): Promise<T> => this.model.create({ ...obj });\n\n  public read = async (): Promise<T[]> => this.model.find();\n\n  public readOne = async (id: string): Promise<T | null> => \n    this.model.findById({ _id: id });\n\n  public update = async (id: string, obj: object): Promise<T | null> => \n    this.model.findByIdAndUpdate({ _id: id }, obj, { new: true });\n\n  public delete = async (id: string): Promise<T | null> => \n    this.model.findByIdAndDelete({ _id: id });\n}\n\nexport default GenericModel;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"13888bc2f1ab0d557e8f1bab04421d5fb05dd5b7"},"/home/ingrid/Programming/trybe/projetos/back-end/bloco30/sd-014-a-project-car-shop/src/services/GenericServices.ts":{"path":"/home/ingrid/Programming/trybe/projetos/back-end/bloco30/sd-014-a-project-car-shop/src/services/GenericServices.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":6,"column":8},"end":{"line":6,"column":27}},"2":{"start":{"line":7,"column":8},"end":{"line":7,"column":29}},"3":{"start":{"line":13,"column":8},"end":{"line":19,"column":10}},"4":{"start":{"line":14,"column":27},"end":{"line":14,"column":53}},"5":{"start":{"line":15,"column":12},"end":{"line":17,"column":13}},"6":{"start":{"line":16,"column":16},"end":{"line":16,"column":47}},"7":{"start":{"line":18,"column":12},"end":{"line":18,"column":42}},"8":{"start":{"line":26,"column":8},"end":{"line":33,"column":10}},"9":{"start":{"line":27,"column":27},"end":{"line":27,"column":53}},"10":{"start":{"line":28,"column":12},"end":{"line":30,"column":13}},"11":{"start":{"line":29,"column":16},"end":{"line":29,"column":47}},"12":{"start":{"line":31,"column":22},"end":{"line":31,"column":48}},"13":{"start":{"line":32,"column":12},"end":{"line":32,"column":21}},"14":{"start":{"line":36,"column":8},"end":{"line":36,"column":33}},"15":{"start":{"line":39,"column":8},"end":{"line":39,"column":38}},"16":{"start":{"line":42,"column":8},"end":{"line":42,"column":37}},"17":{"start":{"line":45,"column":0},"end":{"line":45,"column":33}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":4},"end":{"line":5,"column":5}},"loc":{"start":{"line":5,"column":31},"end":{"line":34,"column":5}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":22},"end":{"line":13,"column":23}},"loc":{"start":{"line":13,"column":37},"end":{"line":19,"column":9}},"line":13},"2":{"name":"(anonymous_2)","decl":{"start":{"line":26,"column":22},"end":{"line":26,"column":23}},"loc":{"start":{"line":26,"column":41},"end":{"line":33,"column":9}},"line":26},"3":{"name":"(anonymous_3)","decl":{"start":{"line":35,"column":4},"end":{"line":35,"column":5}},"loc":{"start":{"line":35,"column":17},"end":{"line":37,"column":5}},"line":35},"4":{"name":"(anonymous_4)","decl":{"start":{"line":38,"column":4},"end":{"line":38,"column":5}},"loc":{"start":{"line":38,"column":22},"end":{"line":40,"column":5}},"line":38},"5":{"name":"(anonymous_5)","decl":{"start":{"line":41,"column":4},"end":{"line":41,"column":5}},"loc":{"start":{"line":41,"column":21},"end":{"line":43,"column":5}},"line":41}},"branchMap":{"0":{"loc":{"start":{"line":15,"column":12},"end":{"line":17,"column":13}},"type":"if","locations":[{"start":{"line":15,"column":12},"end":{"line":17,"column":13}},{"start":{"line":15,"column":12},"end":{"line":17,"column":13}}],"line":15},"1":{"loc":{"start":{"line":28,"column":12},"end":{"line":30,"column":13}},"type":"if","locations":[{"start":{"line":28,"column":12},"end":{"line":30,"column":13}},{"start":{"line":28,"column":12},"end":{"line":30,"column":13}}],"line":28}},"s":{"0":1,"1":2,"2":2,"3":2,"4":1,"5":1,"6":0,"7":1,"8":2,"9":2,"10":2,"11":0,"12":2,"13":2,"14":1,"15":2,"16":2,"17":1},"f":{"0":2,"1":1,"2":2,"3":1,"4":2,"5":2},"b":{"0":[0,1],"1":[0,2]},"inputSourceMap":{"version":3,"file":"/home/ingrid/Programming/trybe/projetos/back-end/bloco30/sd-014-a-project-car-shop/src/services/GenericServices.ts","sources":["/home/ingrid/Programming/trybe/projetos/back-end/bloco30/sd-014-a-project-car-shop/src/services/GenericServices.ts"],"names":[],"mappings":";;AAOA,MAAM,cAAc;IACpB,qCAAqC;IACnC,YACS,KAAe,EACf,MAAkC;QADlC,UAAK,GAAL,KAAK,CAAU;QACf,WAAM,GAAN,MAAM,CAA4B;QAG3C,8BAA8B;QAC9B,4CAA4C;QAE5C,kEAAkE;QAClE,mCAAmC;QACnC,IAAI;QAEJ,WAAM,GAAG,KAAK,EACZ,GAAM,EAC4B,EAAE;YACpC,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;YAC1C,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE;gBACnB,OAAO,EAAE,KAAK,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC;aAChC;YACD,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;QAChC,CAAC,CAAC;QAUF,uBAAuB;QACvB,gBAAgB;QAChB,iBAAiB;QACjB,wCAAwC;QACxC,uCAAuC;QACvC,IAAI;QAEJ,WAAM,GAAG,KAAK,EACZ,EAAU,EACV,GAAW,EACuB,EAAE;YACpC,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;YAC1C,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE;gBACnB,OAAO,EAAE,KAAK,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC;aAChC;YACD,MAAM,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC;YACrC,OAAO,CAAC,CAAC;QACX,CAAC,CAAC;IA5CC,CAAC;IAmBG,KAAK,CAAC,IAAI;QACf,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;IAC3B,CAAC;IAEM,KAAK,CAAC,OAAO,CAAC,EAAU;QAC7B,OAAO,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;IAChC,CAAC;IAqBM,KAAK,CAAC,MAAM,CAAC,EAAU;QAC5B,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;IAC/B,CAAC;CACF;AAED,kBAAe,cAAc,CAAC","sourcesContent":["import { ZodError, z } from 'zod';\nimport { Model } from '../interfaces/ModelInterface';\n\nexport interface ServiceError {\n  error: ZodError;\n}\n\nclass GenericService<T> {\n// abstract class GenericService<T> {\n  constructor(\n    public model: Model<T>,\n    public schema: z.ZodObject<z.ZodRawShape>,\n  ) {}\n\n  // pq tenho que colocar public\n  // constructor(protected model: Model<T>) {}\n\n  // public async create(obj: T): Promise<T | null | ServiceError> {\n  //   return this.model.create(obj);\n  // }\n\n  create = async (\n    obj: T,\n  ): Promise<T | ServiceError | null> => {\n    const parsed = this.schema.safeParse(obj);\n    if (!parsed.success) {\n      return { error: parsed.error };\n    }\n    return this.model.create(obj);\n  };\n\n  public async read(): Promise<T[]> {\n    return this.model.read();\n  }\n\n  public async readOne(id: string): Promise<T | null | ServiceError> {\n    return this.model.readOne(id);\n  }\n\n  // public async update(\n  //   id: string,\n  //   obj: object,\n  // ): Promise<T | null | ServiceError> {\n  //   return this.model.update(id, obj);\n  // }\n\n  update = async (\n    id: string,\n    obj: object,\n  ): Promise<T | ServiceError | null> => {\n    const parsed = this.schema.safeParse(obj);\n    if (!parsed.success) {\n      return { error: parsed.error };\n    }\n    const a = this.model.update(id, obj);\n    return a;\n  };\n\n  public async delete(id: string): Promise<T | null | ServiceError> {\n    return this.model.delete(id);\n  }\n}\n\nexport default GenericService;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e41c2ced1e36747dc3786031885576d105a45ace"}}